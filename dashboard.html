<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Formulario Colaborador</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    label { display: block; margin-top: 10px; }
    input, select { width: 100%; padding: 8px; margin-top: 5px; }
    button { margin-top: 15px; padding: 10px 20px; }
  </style>
</head>
<body>
  <h2>Registro de Colaborador</h2>
  <form id="userForm">
    <label>ID:<input type="text" name="id" required></label>
    <label>Rol:<input type="text" name="rol" required></label>
    <label>Nombre:<input type="text" name="nombre" required></label>
    <label>Email:<input type="email" name="email" required></label>
    <label>Número de Colaborador:<input type="text" name="numero_colaborador" required></label>
    <label>Fecha Ingreso:<input type="date" name="fecha_ingreso"></label>
    <label>Contraseña:<input type="password" name="contraseña"></label>
    <label>Vacaciones:
      <select name="vacaciones">
        <option value="Si">Sí</option>
        <option value="No">No</option>
      </select>
    </label>
    <label>Jefe Directo:<input type="text" name="jefe_directo"></label>
    <label>Correo Jefe:<input type="email" name="correo_jefe"></label>
    <button type="submit">Guardar</button>
  </form>

  <div id="resultado" style="margin-top: 20px;"></div>

  <script>
    const form = document.getElementById("userForm");
    const resultado = document.getElementById("resultado");

    form.addEventListener("submit", function(event) {
      event.preventDefault();

      const formData = new FormData(form);
      const data = { action: "saveUserData" };

      formData.forEach((value, key) => {
        data[key] = value;
      });

      // Cambia esta URL por la URL real de tu Web App desplegado
      const endpoint = "https://script.google.com/macros/s/AKfycbzPWDLF1oxRpIFr25HH52lC4pu91lumsKTmwf7KVziU-QOKkf8kI0izrwBxEpfGuGwjbw/exec";

      fetch(endpoint, {
        method: "POST",
        mode: "cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(json => {
        if (json.success) {
          resultado.innerHTML = `<p style="color:green;">✅ ${json.message}</p>`;
          form.reset();
        } else {
          resultado.innerHTML = `<p style="color:red;">❌ ${json.message}</p>`;
        }
      })
      .catch(error => {
        console.error("Error en fetch:", error);
        resultado.innerHTML = `<p style="color:red;">❌ Error al conectar con el servidor</p>`;
      });
    });
  </script>
</body>
</html>
